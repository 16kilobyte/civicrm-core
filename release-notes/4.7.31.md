# CiviCRM 4.7.31

Released March 7, 2018

- **[Synopsis](#synopsis)**
- **[Features](#features)**
- **[Bugs resolved](#bugs)**
- **[Miscellany](#misc)**
- **[Credits](#credits)**
- **[Feedback](#feedback)**

## <a name="synopsis"></a>Synopsis

| *Does this version...?*                                         |         |
|:--------------------------------------------------------------- |:-------:|
| Fix security vulnerabilities?                                   |         |
| Change the database schema?                                     |         |
| Alter the API?                                                  |         |
| Require attention to configuration options?                     |         |
| Fix problems installing or upgrading to a previous version?     |         |
| **Introduce features?**                                         | **yes** |
| **Fix bugs?**                                                   | **yes** |

## <a name="features"></a>Features

### Core CiviCRM

- **[CRM-21654](https://issues.civicrm.org/jira/browse/CRM-21654) Support custom
  file field on Batch Entry Profile
  ([11520](https://github.com/civicrm/civicrm-core/pull/11520))**

  File fields are no longer suppressed when batch editing data using a profile,
  and if the field currently has a file, the form displays its name.

- **[CRM-21751](https://issues.civicrm.org/jira/browse/CRM-21751) Move SMS provider ID to 'Select Recipients' page from 'SMS content' ([11656](https://github.com/civicrm/civicrm-core/pull/11656))**

- **[CRM-21316](https://issues.civicrm.org/jira/browse/CRM-21316) Refactor getRecipients fn by creating a new fn getMailRecipients, that will be used ONLY to fetch and store mail recipients ([11558](https://github.com/civicrm/civicrm-core/pull/11558))**

- **[CRM-21722](https://issues.civicrm.org/jira/browse/CRM-21722) Payment processor check configuration - improved message in UI ([11604](https://github.com/civicrm/civicrm-core/pull/11604))**

- **[CRM-21461](https://issues.civicrm.org/jira/browse/CRM-21461) Case Dashlet enhancement ([11304](https://github.com/civicrm/civicrm-core/pull/11304))**

- **[CRM-20769](https://issues.civicrm.org/jira/browse/CRM-20769) Allow for Button Text on profiles to be overriden in settings ([11598](https://github.com/civicrm/civicrm-core/pull/11598))**

- **[CRM-21715](https://issues.civicrm.org/jira/browse/CRM-21715) Activity Report: move the SQL creation to a buildQuery function ([11584](https://github.com/civicrm/civicrm-core/pull/11584))**

- **[CRM-21256](https://issues.civicrm.org/jira/browse/CRM-21256) Payment processor contribution page performance improvement ([11563](https://github.com/civicrm/civicrm-core/pull/11563))**

- **[CRM-21334](https://issues.civicrm.org/jira/browse/CRM-21334) Fire hooks on contact image deletion ([11163](https://github.com/civicrm/civicrm-core/pull/11163))**

- **[CRM-21701](https://issues.civicrm.org/jira/browse/CRM-21701) street addresses are not reliably parsed ([11579](https://github.com/civicrm/civicrm-core/pull/11579))**

- **[CRM-21660](https://issues.civicrm.org/jira/browse/CRM-21660) Remove use of deprecated function on mapping_type ([11525](https://github.com/civicrm/civicrm-core/pull/11525))**

- **[CRM-21688](https://issues.civicrm.org/jira/browse/CRM-21688) Use fontawesome to show membership auto-renew status and and error indicator ([11561](https://github.com/civicrm/civicrm-core/pull/11561))**

- **[CRM-21573](https://issues.civicrm.org/jira/browse/CRM-21573) Allow to disable sending of email from activity source contact email for receipt ([11424](https://github.com/civicrm/civicrm-core/pull/11424))**

- **[CRM-21540](https://issues.civicrm.org/jira/browse/CRM-21540) Add support for auto-complete fields in the batch entry forms ([11398](https://github.com/civicrm/civicrm-core/pull/11398))**

- **[CRM-21671](https://issues.civicrm.org/jira/browse/CRM-21671) Add core tasks class ([11536](https://github.com/civicrm/civicrm-core/pull/11536))**

- **[CRM-21511](https://issues.civicrm.org/jira/browse/CRM-21511) Add recurring contribution to membership detail and contribution ([11555](https://github.com/civicrm/civicrm-core/pull/11555) and [11365](https://github.com/civicrm/civicrm-core/pull/11365))**

- **[CRM-21323](https://issues.civicrm.org/jira/browse/CRM-21323) Fix backend credit card payment processor selection ([11530](https://github.com/civicrm/civicrm-core/pull/11530))**

- **[CRM-21512](https://issues.civicrm.org/jira/browse/CRM-21512) Remove restriction on "update subscription" when linked to membership ([11366](https://github.com/civicrm/civicrm-core/pull/11366))**

- **[CRM-21244](https://issues.civicrm.org/jira/browse/CRM-21244) Enhancements to "FROM email addresses" ([11047](https://github.com/civicrm/civicrm-core/pull/11047))**

- **[CRM-21621](https://issues.civicrm.org/jira/browse/CRM-21621) Provide ability to delete first website field ([11480](https://github.com/civicrm/civicrm-core/pull/11480))**

- **[CRM-21629](https://issues.civicrm.org/jira/browse/CRM-21629) Resource URL status check gets false positive when blank user agents are blocked ([11488](https://github.com/civicrm/civicrm-core/pull/11488))**

- **[CRM-21591](https://issues.civicrm.org/jira/browse/CRM-21591) PHP 7.1 issue Non well form numeric value encountered when viewing the misc settings screen ([11505](https://github.com/civicrm/civicrm-core/pull/11505) and [11447](https://github.com/civicrm/civicrm-core/pull/11447))**

- **[CRM-21050](https://issues.civicrm.org/jira/browse/CRM-21050) Use datepicker for all date fields used in contribution backoffice form ([10841](https://github.com/civicrm/civicrm-core/pull/10841))**

- **[CRM-21618](https://issues.civicrm.org/jira/browse/CRM-21618) Add missing structure in templates ([11478](https://github.com/civicrm/civicrm-core/pull/11478))**

- **[CRM-13123](https://issues.civicrm.org/jira/browse/CRM-13123) Handle value-separated fields at the dao level ([11472](https://github.com/civicrm/civicrm-core/pull/11472))**

- **[CRM-8140](https://issues.civicrm.org/jira/browse/CRM-8140) Not possible to select fields for export when using Custom Searches ([11458](https://github.com/civicrm/civicrm-core/pull/11458))**

- **[CRM-21599](https://issues.civicrm.org/jira/browse/CRM-21599) Add missing structure in templates ([11457](https://github.com/civicrm/civicrm-core/pull/11457))**

- **[CRM-21546](https://issues.civicrm.org/jira/browse/CRM-21546) Implement unique opens filter for mailing opened report ([11401](https://github.com/civicrm/civicrm-core/pull/11401))**

- **[CRM-21593](https://issues.civicrm.org/jira/browse/CRM-21593) New order by options for WalkList Report ([11449](https://github.com/civicrm/civicrm-core/pull/11449))**

- **[CRM-21226](https://issues.civicrm.org/jira/browse/CRM-21226) Add view filter handler for contact reference custom field ([508](https://github.com/civicrm/civicrm-drupal/pull/508))**

### CiviCRM API

- **[CRM-21750](https://issues.civicrm.org/jira/browse/CRM-21750) Add support for address_id, email_greeting_id, postal_greeting_id to api Contact.get ([11654](https://github.com/civicrm/civicrm-core/pull/11654))**

- **[CRM-21707](https://issues.civicrm.org/jira/browse/CRM-21707) Handle metadata based serialisation in apiv3 basic_create_fallover ([11648](https://github.com/civicrm/civicrm-core/pull/11648), [11607](https://github.com/civicrm/civicrm-core/pull/11607), and [11583](https://github.com/civicrm/civicrm-core/pull/11583))**

### CiviContribute, CiviCRM Search

- **[CRM-21343](https://issues.civicrm.org/jira/browse/CRM-21343) Search Contributions by Cancel Date and Cancel Reason ([11638](https://github.com/civicrm/civicrm-core/pull/11638))**

### Extension System

- **[CRM-20625](https://issues.civicrm.org/jira/browse/CRM-20625) Better Payment Processor extension error handling ([11631](https://github.com/civicrm/civicrm-core/pull/11631))**

- **[CRM-21140](https://issues.civicrm.org/jira/browse/CRM-21140) Agree & (if applicable) implement approach to storing extension data for entities / tables ([11567](https://github.com/civicrm/civicrm-core/pull/11567))**

### CiviCRM Search

- **[CRM-21674](https://issues.civicrm.org/jira/browse/CRM-21674) Allow proximity search to accept lat & long at the BAO/api level & custom search form ([11542](https://github.com/civicrm/civicrm-core/pull/11542))**

- **[CRM-21717](https://issues.civicrm.org/jira/browse/CRM-21717) Allow for selecting multiple relationship types in advanced search ([11595](https://github.com/civicrm/civicrm-core/pull/11595))**

- **[CRM-21634](https://issues.civicrm.org/jira/browse/CRM-21634) Standardise component search options for contact fields, add contact type ([11492](https://github.com/civicrm/civicrm-core/pull/11492))**

### CiviReport

- **[CRM-21616](https://issues.civicrm.org/jira/browse/CRM-21616) sql metadata is being lost when calling the report from the api ([11476](https://github.com/civicrm/civicrm-core/pull/11476))**

- **[CRM-21670](https://issues.civicrm.org/jira/browse/CRM-21670) Search of active relationships does not appear on Relationship Report ([11537](https://github.com/civicrm/civicrm-core/pull/11537))**

- **[CRM-21635](https://issues.civicrm.org/jira/browse/CRM-21635) Expose contact custom data on contribution summary report ([11494](https://github.com/civicrm/civicrm-core/pull/11494))**

### Core CiviCRM, Internationalisation

- **[CRM-21719](https://issues.civicrm.org/jira/browse/CRM-21719) Require Multibyte PHP Extension ([11612](https://github.com/civicrm/civicrm-core/pull/11612) and [11599](https://github.com/civicrm/civicrm-core/pull/11599))**

### WordPress Integration

- **[CRM-16421](https://issues.civicrm.org/jira/browse/CRM-16421) Work to get CiviCRM for WordPress in WordPress' official Repository ([11576](https://github.com/civicrm/civicrm-core/pull/11576) and [122](https://github.com/civicrm/civicrm-wordpress/pull/122))**

### CiviContribute

- **[CRM-21698](https://issues.civicrm.org/jira/browse/CRM-21698) On some systems recording a negative contribution results in a $0 contribution ([11577](https://github.com/civicrm/civicrm-core/pull/11577))**

### CiviMember

- **[CRM-20707](https://issues.civicrm.org/jira/browse/CRM-20707) membership inheritance does not update start/end dates ([10485](https://github.com/civicrm/civicrm-core/pull/10485))**

- **[CRM-21554](https://issues.civicrm.org/jira/browse/CRM-21554) Offline Credit Card Membership Renewal not showing any error message on failure  ([11408](https://github.com/civicrm/civicrm-core/pull/11408))**

### CiviCRM Search, Core CiviCRM

- **[CRM-21672](https://issues.civicrm.org/jira/browse/CRM-21672) Intra-rc regression - fatal error on deleting participant ([11538](https://github.com/civicrm/civicrm-core/pull/11538))**

### CiviCRM Profile

- **[CRM-21225](https://issues.civicrm.org/jira/browse/CRM-21225) CIVICRM-506 Add a new field, Profile Title so that the Profile Name does not serve a dual purpose of labelling the Profile and displaying the Title for the Profile fields publicly ([11508](https://github.com/civicrm/civicrm-core/pull/11508) and [11503](https://github.com/civicrm/civicrm-core/pull/11503))**

### Drupal Integration Modules

- **[CRM-21652](https://issues.civicrm.org/jira/browse/CRM-21652) Numerous issues with anonymous users registering accounts on Drupal 8 (especially from contribution pages) ([11509](https://github.com/civicrm/civicrm-core/pull/11509) and [11507](https://github.com/civicrm/civicrm-core/pull/11507))**

- **[CRM-20822](https://issues.civicrm.org/jira/browse/CRM-20822) Expose tag parent id in views ([459](https://github.com/civicrm/civicrm-drupal/pull/459))**

- **[CRM-21758](https://issues.civicrm.org/jira/browse/CRM-21758) Add event "created_id" to Drupal Views ([519](https://github.com/civicrm/civicrm-drupal/pull/519))**

### CiviCase

- **[CRM-21498](https://issues.civicrm.org/jira/browse/CRM-21498) Option to Change Status of Linked Cases ([11350](https://github.com/civicrm/civicrm-core/pull/11350))**

### CiviMail, Core CiviCRM

- **[CRM-21020](https://issues.civicrm.org/jira/browse/CRM-21020) alterMailContent hook: pass additional contextual details ([10815](https://github.com/civicrm/civicrm-core/pull/10815))**

### CiviCase, Core CiviCRM

- **[CRM-21520](https://issues.civicrm.org/jira/browse/CRM-21520) Add Action on Contact Search to Add Contacts to a Case ([11371](https://github.com/civicrm/civicrm-core/pull/11371))**

## <a name="bugs"></a>Bugs resolved

### CiviMail

- **[CRM-21759](https://issues.civicrm.org/jira/browse/CRM-21759) mailing template selector missing ([11676](https://github.com/civicrm/civicrm-core/pull/11676))**

- **[CRM-21683](https://issues.civicrm.org/jira/browse/CRM-21683) Mailing summary breaks on mailing names with apostrophes ([11557](https://github.com/civicrm/civicrm-core/pull/11557))**

- **[CRM-21260](https://issues.civicrm.org/jira/browse/CRM-21260) CiviMail compose UI very slow to initialize when many mailing groups, past mailings and templates ([11142](https://github.com/civicrm/civicrm-core/pull/11142))**

- **[CRM-21521](https://issues.civicrm.org/jira/browse/CRM-21521) Bounce processing exception: no such property 'text' ([11390](https://github.com/civicrm/civicrm-core/pull/11390))**

### NYSS

- **[CRM-21760](https://issues.civicrm.org/jira/browse/CRM-21760) Manager Name is missing in 'Find Cases' search list ([11665](https://github.com/civicrm/civicrm-core/pull/11665))**

### Core CiviCRM

- **Change geocoder message check. ([11664](https://github.com/civicrm/civicrm-core/pull/11664))**

- **[CRM-20996](https://issues.civicrm.org/jira/browse/CRM-20996) Copy profile from wizard duplicates 'name' in database ([11597](https://github.com/civicrm/civicrm-core/pull/11597))**

- **dev/core#2 Display Inbound Email: linefeed fixed ([11661](https://github.com/civicrm/civicrm-core/pull/11661))**

- **Unit test fixes ([11659](https://github.com/civicrm/civicrm-core/pull/11659))**

- **[CRM-21738](https://issues.civicrm.org/jira/browse/CRM-21738) Merges not copying viewOnly data (regression but not recent) ([11636](https://github.com/civicrm/civicrm-core/pull/11636))**

- **Fix unit test to not rely on hacking the DB to have ids for price set… ([11652](https://github.com/civicrm/civicrm-core/pull/11652))**

- **fix dev/core#1: allow to search contributions that are in progress ([11640](https://github.com/civicrm/civicrm-core/pull/11640))**

- **Added trait to support Codeception tests ([11115](https://github.com/civicrm/civicrm-core/pull/11115))**

- **Allow data-params to be specified as an item property and passed to CRM.api3 call ([11639](https://github.com/civicrm/civicrm-core/pull/11639))**

- **[CRM-21742](https://issues.civicrm.org/jira/browse/CRM-21742) Use form validation rather than Exception handling for proximity seach ([11643](https://github.com/civicrm/civicrm-core/pull/11643))**

- **[CRM-19784](https://issues.civicrm.org/jira/browse/CRM-19784) Yahoo Placefinder service appears to have EOL'ed ([11540](https://github.com/civicrm/civicrm-core/pull/11540))**

- **[CRM-21737](https://issues.civicrm.org/jira/browse/CRM-21737) New option value validation is too tight for languages ([11633](https://github.com/civicrm/civicrm-core/pull/11633))**

- **Amount and source could exceed max length of subject column ([11593](https://github.com/civicrm/civicrm-core/pull/11593))**

- **[CRM-21721](https://issues.civicrm.org/jira/browse/CRM-21721) Notice : Division by zero ([11623](https://github.com/civicrm/civicrm-core/pull/11623) and [11601](https://github.com/civicrm/civicrm-core/pull/11601))**

- **Website api - fix nonstandard BAO delete method ([11625](https://github.com/civicrm/civicrm-core/pull/11625))**

- **(NFC) Fix logging test for multilingual on MySQL5.7 ([11626](https://github.com/civicrm/civicrm-core/pull/11626))**

- **[CRM-21730](https://issues.civicrm.org/jira/browse/CRM-21730) postProcess() hook don't receive case id after submitting "New Case" form ([11618](https://github.com/civicrm/civicrm-core/pull/11618))**

- **[nfc] Fix intermittantly failing test. ([11617](https://github.com/civicrm/civicrm-core/pull/11617))**

- **[CRM-21729](https://issues.civicrm.org/jira/browse/CRM-21729) Exclude (non-lintable) vendor test cases from deply ([11613](https://github.com/civicrm/civicrm-core/pull/11613))**

- **Use mb_strlen() in ellipsify() to avoid excessive multibyte truncation ([11594](https://github.com/civicrm/civicrm-core/pull/11594))**

- **[CRM-21524](https://issues.civicrm.org/jira/browse/CRM-21524) CiviCRM exports (postal) mailing lists including Contacts clearly marked is_deceased in the database ([11527](https://github.com/civicrm/civicrm-core/pull/11527))**

- **Minor api clean up. ([11569](https://github.com/civicrm/civicrm-core/pull/11569))**

- **[CRM-21687](https://issues.civicrm.org/jira/browse/CRM-21687) MariaDB 10.2 and logging: log_civicrm_activity schema syntax error ([11580](https://github.com/civicrm/civicrm-core/pull/11580))**

- **Api4 - Update entity directory ([11582](https://github.com/civicrm/civicrm-core/pull/11582))**

- **Fix typo (very recent) ([11566](https://github.com/civicrm/civicrm-core/pull/11566))**

- **[CRM-21623](https://issues.civicrm.org/jira/browse/CRM-21623) Smart Group Relative Date not saving for some fields in Advance Search. ([11486](https://github.com/civicrm/civicrm-core/pull/11486))**

- **EXT-56 - Add com.iatspayments.civicrm to tarballs ([11052](https://github.com/civicrm/civicrm-core/pull/11052))**

- **Add API parameter for fix_address ([11372](https://github.com/civicrm/civicrm-core/pull/11372))**

- **[CRM-21684](https://issues.civicrm.org/jira/browse/CRM-21684) contact subtype fields prevent inclusion in profile/receipt email ([11559](https://github.com/civicrm/civicrm-core/pull/11559))**

- **Minor api tidy up. ([11543](https://github.com/civicrm/civicrm-core/pull/11543))**

- **Fix mock test data for PaymentProcessor object. ([11545](https://github.com/civicrm/civicrm-core/pull/11545))**

- **[CRM-21667](https://issues.civicrm.org/jira/browse/CRM-21667) Bad timezone hand-off from CMS to CRM ([11534](https://github.com/civicrm/civicrm-core/pull/11534))**

- **[CRM-21651](https://issues.civicrm.org/jira/browse/CRM-21651) Contact :: New Email/SMS : loading failed when no contact is found ([11506](https://github.com/civicrm/civicrm-core/pull/11506))**

- **[CRM-21669](https://issues.civicrm.org/jira/browse/CRM-21669) Consistent wording for "Email - Send now" task ([11535](https://github.com/civicrm/civicrm-core/pull/11535))**

- **[CRM-21613](https://issues.civicrm.org/jira/browse/CRM-21613) Search issues on 'Manage Tag' page ([11510](https://github.com/civicrm/civicrm-core/pull/11510) and [11467](https://github.com/civicrm/civicrm-core/pull/11467))**

- **[CRM-21663](https://issues.civicrm.org/jira/browse/CRM-21663) Fix Campaign Search and result structure ([11528](https://github.com/civicrm/civicrm-core/pull/11528))**

- **[CRM-21444](https://issues.civicrm.org/jira/browse/CRM-21444) Empty field at form "Add rule for..." merge duplicate contacts ([11523](https://github.com/civicrm/civicrm-core/pull/11523))**

- **[CRM-20904](https://issues.civicrm.org/jira/browse/CRM-20904) Joomla - Fatal Error when schedule job is executed from cron.php ([10692](https://github.com/civicrm/civicrm-core/pull/10692))**

- **[CRM-21485](https://issues.civicrm.org/jira/browse/CRM-21485) Tax not added when renewing membership in backend ([11459](https://github.com/civicrm/civicrm-core/pull/11459))**

- **[CRM-21533](https://issues.civicrm.org/jira/browse/CRM-21533) Outbound setting reverts in non-production sites on executing sched job ([11393](https://github.com/civicrm/civicrm-core/pull/11393))**

- **[CRM-17352](https://issues.civicrm.org/jira/browse/CRM-17352) Backbone no-conflict ([11504](https://github.com/civicrm/civicrm-core/pull/11504) and [198](https://github.com/civicrm/civicrm-packages/pull/198))**

- **Edit to contributor listing: Standalone code contributor from now. ([11512](https://github.com/civicrm/civicrm-core/pull/11512))**

- **[CRM-21647](https://issues.civicrm.org/jira/browse/CRM-21647) Fatal error on deleting any contribution record ([11500](https://github.com/civicrm/civicrm-core/pull/11500))**

- **[CRM-21644](https://issues.civicrm.org/jira/browse/CRM-21644) Preferred Communication Method is not set to default for contact ([11499](https://github.com/civicrm/civicrm-core/pull/11499))**

- **Fix unit test failure ([11479](https://github.com/civicrm/civicrm-core/pull/11479))**

- **[CRM-21612](https://issues.civicrm.org/jira/browse/CRM-21612) Membership Payment not recorded for recurring contribution when status label is changed. ([11465](https://github.com/civicrm/civicrm-core/pull/11465))**

- **[CRM-18300](https://issues.civicrm.org/jira/browse/CRM-18300) "Permission denied" message re contact on CiviCRM dashboard ([11470](https://github.com/civicrm/civicrm-core/pull/11470))**

- **[CRM-21614](https://issues.civicrm.org/jira/browse/CRM-21614) Tag UI doesn't appear to respect reserved tags permission ([11469](https://github.com/civicrm/civicrm-core/pull/11469))**

- **[CRM-21580](https://issues.civicrm.org/jira/browse/CRM-21580) exporting financial batch fails when label of batch statuses changed ([11434](https://github.com/civicrm/civicrm-core/pull/11434))**

- **Reformat DAO files to pass linting and use short array syntax ([11418](https://github.com/civicrm/civicrm-core/pull/11418))**

- **[CRM-21589](https://issues.civicrm.org/jira/browse/CRM-21589) "Repeat Contributions" report ignores sort ([11446](https://github.com/civicrm/civicrm-core/pull/11446))**

- **Params to assertGreaterThanOrEqual in api_v3_CaseTest were in wrong order ([11451](https://github.com/civicrm/civicrm-core/pull/11451))**

- **[CRM-20614](https://issues.civicrm.org/jira/browse/CRM-20614) Do not Download Export file for Financial Batch  ([10393](https://github.com/civicrm/civicrm-core/pull/10393))**

- **Backport fix from D7 module. ([514](https://github.com/civicrm/civicrm-drupal/pull/514))**

- **Update civicrm_handler_field_contact_image.inc ([516](https://github.com/civicrm/civicrm-drupal/pull/516))**

- **Installation - If available, use the new installer package ([121](https://github.com/civicrm/civicrm-wordpress/pull/121))**

- **[CRM-17652](https://issues.civicrm.org/jira/browse/CRM-17652) Symfony conflict between Civi and Drupal 8 ([193](https://github.com/civicrm/civicrm-packages/pull/193))**

### CiviCampaign

- **[CRM-21602](https://issues.civicrm.org/jira/browse/CRM-21602) Disable/Enable
  Campaign not working
  ([11466](https://github.com/civicrm/civicrm-core/pull/11466))**

  The loading icon would not stop when working with the listings of campaigns,
  surveys, and petitions.

### CiviEvent

- **[CRM-21743](https://issues.civicrm.org/jira/browse/CRM-21743) Creating an event template from existing one does not work ([11644](https://github.com/civicrm/civicrm-core/pull/11644))**

- **[CRM-21071](https://issues.civicrm.org/jira/browse/CRM-21071) Event Location Tab: Second Email and Phone fields broken ([11568](https://github.com/civicrm/civicrm-core/pull/11568))**

### CiviContribute, CiviEvent, Internationalisation

- **[CRM-17647](https://issues.civicrm.org/jira/browse/CRM-17647) Recording payment truncates the amount after the comma (whether thousands or decimal separator) ([11539](https://github.com/civicrm/civicrm-core/pull/11539), [11646](https://github.com/civicrm/civicrm-core/pull/11646), [11575](https://github.com/civicrm/civicrm-core/pull/11575), [11574](https://github.com/civicrm/civicrm-core/pull/11574), [11554](https://github.com/civicrm/civicrm-core/pull/11554), [11547](https://github.com/civicrm/civicrm-core/pull/11547), and [11541](https://github.com/civicrm/civicrm-core/pull/11541))**

### CiviContribute

- **[CRM-20676](https://issues.civicrm.org/jira/browse/CRM-20676) Tax applied repeatedly on edits of price set events ([11655](https://github.com/civicrm/civicrm-core/pull/11655) and [11461](https://github.com/civicrm/civicrm-core/pull/11461))**

- **[CRM-19752](https://issues.civicrm.org/jira/browse/CRM-19752) Slow query created by financial type acls ([11621](https://github.com/civicrm/civicrm-core/pull/11621) and [9746](https://github.com/civicrm/civicrm-core/pull/9746))**

- **[CRM-21665](https://issues.civicrm.org/jira/browse/CRM-21665) Check Number show hide not working ([11611](https://github.com/civicrm/civicrm-core/pull/11611))**

- **[CRM-21724](https://issues.civicrm.org/jira/browse/CRM-21724) Receipt for membership contribution sending custom fields for wrong membership type  ([11605](https://github.com/civicrm/civicrm-core/pull/11605))**

- **[CRM-21656](https://issues.civicrm.org/jira/browse/CRM-21656) Backend Membership with Priceset applies taxes twice to line_item ([11521](https://github.com/civicrm/civicrm-core/pull/11521))**

- **[CRM-21155](https://issues.civicrm.org/jira/browse/CRM-21155) Hook batchItems does not change the csv export ([10951](https://github.com/civicrm/civicrm-core/pull/10951))**

- **[CRM-19107](https://issues.civicrm.org/jira/browse/CRM-19107) PayPal Button Error ([11474](https://github.com/civicrm/civicrm-core/pull/11474))**

- **[CRM-21609](https://issues.civicrm.org/jira/browse/CRM-21609) PayPal Pro IPN code no longer respects changed recurring amount ([11463](https://github.com/civicrm/civicrm-core/pull/11463))**

### CiviCRM API

- **[CRM-21749](https://issues.civicrm.org/jira/browse/CRM-21749) [obscure intra-rc regression] Mailing api no longer respecting '_skip_evil_bao_auto_schedule_' ([11653](https://github.com/civicrm/civicrm-core/pull/11653))**

- **[CRM-21728](https://issues.civicrm.org/jira/browse/CRM-21728) Intermittant fatal on pcp.create api ([11606](https://github.com/civicrm/civicrm-core/pull/11606))**

### CiviCRM Search

- **[CRM-21744](https://issues.civicrm.org/jira/browse/CRM-21744) Fix proximity custom search to work with smart groups ([11645](https://github.com/civicrm/civicrm-core/pull/11645))**

- **[CRM-21159](https://issues.civicrm.org/jira/browse/CRM-21159) Address fields cause DB errors when adding contacts to group from Search Builder ([11524](https://github.com/civicrm/civicrm-core/pull/11524) and [11422](https://github.com/civicrm/civicrm-core/pull/11422))**

### CiviCase

- **[CRM-21704](https://issues.civicrm.org/jira/browse/CRM-21704) Do Not allow a case type that is reserved to be deleted or disabled. ([11581](https://github.com/civicrm/civicrm-core/pull/11581))**

### CiviMember

- **[CRM-19920](https://issues.civicrm.org/jira/browse/CRM-19920) Job.process_membership uses too much memory ([11564](https://github.com/civicrm/civicrm-core/pull/11564))**

### CiviCRM Search, Core CiviCRM

- **[CRM-14834](https://issues.civicrm.org/jira/browse/CRM-14834) Activity Export with Relationships incurs fatal error ([11526](https://github.com/civicrm/civicrm-core/pull/11526))**

### CiviContribute, CiviCRM API

- **[CRM-21664](https://issues.civicrm.org/jira/browse/CRM-21664) Contributions creation result in error for certain currencies ([11533](https://github.com/civicrm/civicrm-core/pull/11533))**

### CiviReport

- **[CRM-18048](https://issues.civicrm.org/jira/browse/CRM-18048) Activity Report fatal error when including custom field set with long name ([11183](https://github.com/civicrm/civicrm-core/pull/11183))**

- **[CRM-21528](https://issues.civicrm.org/jira/browse/CRM-21528) top donor report: add2group error ([11482](https://github.com/civicrm/civicrm-core/pull/11482))**

### Internationalisation

- **[CRM-21627](https://issues.civicrm.org/jira/browse/CRM-21627) Can't enable multilanguage support in Drupal  ([11491](https://github.com/civicrm/civicrm-core/pull/11491))**

### CiviContribute, CiviCRM Search

- **[CRM-20866](https://issues.civicrm.org/jira/browse/CRM-20866) Soft credit appearance inconsistent in contribution search ([11433](https://github.com/civicrm/civicrm-core/pull/11433))**

### Drupal Integration Modules

- **[CRM-20298](https://issues.civicrm.org/jira/browse/CRM-20298) Drupal Views: Custom fields of type Money should use the same filter operators as Integer fields ([436](https://github.com/civicrm/civicrm-drupal/pull/436))**

- **[crm-16541](https://issues.civicrm.org/jira/browse/crm-16541) drush civicrm-sql-dump fails to dump stored function ([520](https://github.com/civicrm/civicrm-drupal/pull/520))**

### Backdrop Integration

- **[CRM-21619](https://issues.civicrm.org/jira/browse/CRM-21619) Can't install CiviCRM on Backdrop using the Module Installer ([44](https://github.com/civicrm/civicrm-backdrop/pull/44))**

## <a name="misc"></a>Miscellany

## <a name="credits"></a>Credits

This release was developed by the following code authors:

AGH Strategies - Alice Frumin, Tommy Bobo; ajesamson; Australian Greens - Seamus Lee; CiviCoop - Erik Hommel; CiviCRM - Coleman Watts, Tim Otten; CiviDesk - Sunil Pawar, Yashodha Chaku; CompuCorp - Camilo Rodriguez, Michael Devery, Mukesh Ram, Omar Abu Hussein; Coop SymbioTIC - Mathieu Lutfy; Electronic Frontier Foundation - Mark Burdett; Francesc Bassas i Bullich; Freeform Solutions - Herb van den Dool; Fuzion - Jitendra Purohit; Ginkgo Street Labs - Frank Gómez; JazzMan; JMA Consulting - Monish Deb; Johan Vervloet; John Kingsnorth; Joinery - Allen Shaw; Joost Fock; karthik-awebon; lemacarl; Lighthouse Design and Consulting - Brian Shaughnessy; Megaphone Technology Consulting - Jon Goldberg; MJW Consulting - Matthew Wire; mountev; myDropWizard - David Snopek; Oxfam Germany - Thomas Schüttler; pbatroff; Pradeep Nayak; Progressive Technology Project - Jamie McClelland; sluc23; Squiffle Consulting - Aidan Saunders; sunnycs121; Systopia - Björn Endres; Tech To The People - Xavier Dutoit; Third Sector Design - Michael McAndrew; Timbsoft Technologies - Tunbola Ogunwande; username12; Vedant Rathore; Wikimedia Foundation - Eileen McNaughton, Elliott Eggleston; yurg

Most authors also reviewed code for this release; in addition, the following
reviewers contributed their comments:

AGH Strategies - Alice Frumin, Andrew Hunt, Tommy Bobo; Agileware - Agileware Team; alexlee; Andy Clarke; Anthony Borrow; Australian Greens - Seamus Lee; BackOffice Thinking - Hassan Farooq; Blackfly Solutions - Alan Dixon; Chris Burgess; Christophe Golle; Circle Interactive - Andrew Walker, Dave Jenkins; CiviCoop - Erik Hommel; civicrm-builder; CiviCRM - Coleman Watts, Tim Otten; CiviDesk - Nicolas Ganivet, Sunil Pawar, Yashodha Chaku; com2; CompuCorp - Camilo Rodriguez, Guanhuan Chen, Michael Devery, Mukesh Ram, Omar Abu Hussein, Tunbola Ogunwande; Comunica2 - René Nieuwburg; coolbit; Coop SymbioTIC - Mathieu Lutfy; Custom Websites to Go - Julie Hall; Dave Greenberg; Dave Rolsky; DevMate - Adam Kwiatkowski; Donald Lobo; Electronic Frontier Foundation - Mark Burdett; Evan Chute; Francesc Bassas i Bullich; Freeform Solutions - Herb van den Dool; Fuzion - Gemma Potaka, Jitendra Purohit, Peter Davis; gah242s; Ginkgo Street Labs - Dan O'Brien, Frank Gómez; heather oliver; hollyhanks; JMA Consulting - Joe Murray, Monish Deb; Johan Vervloet; John Kingsnorth; Joinery - Allen Shaw; Joost; Joost Fock; Joseph Lacey; Juan David Hurtado G.; Just Hope - Phil Morice Brubaker; karthik-awebon; Klangsoft - David Reedy Jr; Korlon - Stuart Gaston; larssg; lemacarl; Lemniscus - Noah Miller; liblogger; Lighthouse Design and Consulting - Brian Shaughnessy; MC3 - Graham Mitchell; Megaphone Technology Consulting - Jon Goldberg; mickc; MJW Consulting - Matthew Wire; mpeth; myDropWizard - David Snopek; Nathan Brettell; Nubay Services - David Tarrant; Oxfam Germany - Thomas Schüttler; Palante Technology Cooperative - Jack Aponte; philmb; pnbpss; Pradeep Nayak; Progressive Technology Project - Jamie McClelland; Registered Nurses' Association of Ontario - Thomas Mannell; Renz56c.o; reperry; Richard van Oosterhout; Saurabh Batra; Semper IT - Karin Gerritsen; Skvare - Mark Hanna; slovak; sluc23; smmd; spry_julia; Squiffle Consulting - Aidan Saunders; sunnycs121; Systopia - Björn Endres, Fabian Schuttenberg; Tadpole Collective - Kevin Cristiano; Team Expansion - Greg Harris; Tech To The People - Xavier Dutoit; themak; Third Sector Design - Michael McAndrew; Tobias Lounsbury; trakos; Vedant Rathore; Web Access - Kurund Jalmi; We Move Europe/Caltha - Tomasz Pietrzkowski; Wikimedia Foundation - Eileen McNaughton, Elliott Eggleston

## <a name="feedback"></a>Feedback

These release notes are edited by Andrew Hunt.  If you'd like to provide
feedback on them, please login to https://chat.civicrm.org/civicrm and contact
`@agh1`.
